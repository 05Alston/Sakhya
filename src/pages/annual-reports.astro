---
// Layout
import PageLayout from "../layouts/PageLayout.astro";

// Components
import Hero from "../components/Hero.astro";
import Section from "../components/Section.astro";
import PageTitle from "../components/PageTitle.astro";
import SectionTitle from "../components/SectionTitle.astro";
import MagzineCard from "../components/MagzineCard.astro";

// Assets
import HeroImage from "../assets/home.webp";
const reports = await Astro.glob("../assets/reports/*.pdf");
reports.reverse();
const reportThumbnails = await Astro.glob("../assets/reports/thumbnails/*.png");
const HeroBg = `url(${HeroImage.src})`;
---

<PageLayout title="Annual Reports">
    <Hero bgImg={HeroBg} overlay={false} />
    <Section>
        <PageTitle primaryText="Annual Reports" />
        <SectionTitle primaryText="Our Annual" secondaryText="Reports" />
        <p class="text-gray-600 mb-8">
            Networking and Advocacy forms an integral part of Sakhyaâ€™s
            activities. We believe that change and transformation is achieved by
            working in solidarity. Hence we network with partners at the
            district level, state level and the national level. This gives
            Sakhya a platform to work together to effect changes at the policy
            level.
        </p>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
            {
                reports.map((report) => {
                    const fileName = report.default
                        .split("/")
                        .pop()
                        .slice(0, -4);

                    const thumbnail = reportThumbnails.find((thumb) =>
                        thumb.default.src.includes(fileName),
                    );

                    if (!thumbnail) {
                        // return default img
                        return "";
                    }
                    return (
                        <MagzineCard
                            imgSrc={thumbnail.default.src}
                            year={fileName}
                            src={report.default}
                        />
                    );
                })
            }
        </div>
    </Section>
</PageLayout>
