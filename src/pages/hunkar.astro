---
// Layout
import PageLayout from "../layouts/PageLayout.astro";

// Components
import Hero from "../components/Hero.astro";
import Section from "../components/Section.astro";
import MagzineCard from "../components/MagzineCard.astro";

// Assets
import HeroImage from "../assets/home.png";
const mags = await Astro.glob("../assets/hunkar/*.pdf");
const magThumbnails = await Astro.glob("../assets/hunkar/thumbnails/*.webp");
const HeroBg = `url(${HeroImage.src})`;

const numberToMonth = (number: number) => {
    switch (number) {
        case 1:
            return "January";
        case 2:
            return "February";
        case 3:
            return "March";
        case 4:
            return "April";
        case 5:
            return "May";
        case 6:
            return "June";
        case 7:
            return "July";
        case 8:
            return "August";
        case 9:
            return "September";
        case 10:
            return "October";
        case 11:
            return "November";
        case 12:
            return "December";
        default:
            return "January";
    }
};
---

<PageLayout title="Hunkar">
    <Hero bgImg={HeroBg} overlay={false} />
    <Section>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
            {
                mags.map((mag, index) => {
                    const fileName = mag.default.split("/").pop().slice(0, -4);
                    let [year, month] = fileName.split("-");
                    year = year.split(".")[0];
                    month = Number(month);

                    const thumbnail = magThumbnails.find((thumb) =>
                        thumb.default.src.includes(fileName),
                    );

                    if (!thumbnail) {
                        // return default img
                        return "";
                    }
                    return (
                        <MagzineCard
                            imgSrc={thumbnail.default.src}
                            month={numberToMonth(month)}
                            year={year}
                            src={mag.default}
                        />
                    );
                })
            }
        </div>
    </Section>
</PageLayout>
